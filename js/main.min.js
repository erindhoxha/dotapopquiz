$(document).ready(function(){$(".fa-bars").click(function(){$(".main-nav-phone").toggle("slide");$(".support-nav").hide(500);$(".container").show(500)});$(".fa-cog").click(function(){$(".fa-cog").toggleClass("clicked");$(".support-nav").toggle("slide");if($(".fa-cog").is("clicked")){$(".main-nav-phone").hide(500)}});$(".stage").on('click',function(){var nr=$(this).attr('data-nr');loadStage(nr)});$("#button-check").on('click',function(){$("#button-check").toggleClass('bounceIn')});function loadStage(stageNumber){$("body").addClass("modal-open");var source=document.getElementById("keyboard-button-template").innerHTML;var template=Handlebars.compile(source);var extraLetters=levelData["level"+currentLevel][stageNumber].extraLetters.split('');var answerLetters=levelData["level"+currentLevel][stageNumber].answer.split('');var letters=[...extraLetters,...answerLetters].map(function(x){return x.toUpperCase()});$("#btn-space").css('width','100%');shuffle(letters);var html=template(letters);$("#keyboard-container").html(html);$("#btn-clear").on('click',function(){$("#keyboard-container .btn-keyboard").css('visibility','visible');$("#keyboard-container .btn-keyboard").removeClass('clicked');$("#answer-input").val("")});$("#btn-remove").on('click',function(){var str=$("#answer-input").val();var lastChar=str.substr(str.length-1);for(var i=0;i<$("button:contains('"+lastChar+"')").length;i++){if($("button:contains('"+lastChar+"')")[i].style.visibility=="hidden"){$($("button:contains('"+lastChar+"')")[i]).removeClass('clicked');$("button:contains('"+lastChar+"')")[i].style.visibility="visible";break}}
str=str.slice(0,-1);$("#answer-input").val(str);$("#btn-remove").css('background-image','none');$("#btn-remove").css('background-color','none')});$("#btn-space").on('click',function(){var space=" ";$("#answer-input").val($("#answer-input").val()+space)});$(".btn-keyboard:contains(' ')").attr('style','display: none');var stage=levelData["level"+currentLevel][stageNumber];window.currentStage=stageNumber;currentAnswer=stage.answer;$(".modal-img").attr('src',"img/"+stage.image);modal.style.display="block";var isSolved=localStorage.getItem("level"+currentLevel+"_stage"+currentStage);if(isSolved){$("#answer-input").val(currentAnswer.toUpperCase());$("#answer-input").css('width','100%');$("#answer-input").prop('disabled',!0);$("#answer-input").css('border','2px solid #46A413');$(".fa-check-circle").css('display','block');var buttons=document.querySelectorAll('.btn-keyboard');for(var i=0;i<buttons.length;i++){buttons[i].style.display="none"}
$("#button-check").hide();$("#btn-remove").hide();$("#btn-clear").hide();$("#btn-space").hide()}else{$(".fa-check-circle").css('display','none');$("#answer-input").val("");$("#answer-input").css('border','none');$("#button-check").show();$("#answer-input").css('width','65%')}}
var input=document.getElementById("answer-input");window.addEventListener("keyup",function(event){event.preventDefault();if(event.keyCode===13){document.getElementById("button-check").click()}});$("#btn-bomb").on('click',function(){sweetAlert('Nice one!','','success');$(".swal2-success-circular-line-left").css('background-color','transparent');$(".swal2-success-circular-line-right").css('background-color','transparent');$(".swal2-popup").css('background-color','black');$(".swal2-success-fix").css('background-color','transparent');$("#swal2-title").css('color','white');$("#myModal").hide(1000);$(".swal2-styled").css('background-image','linear-gradient(#c92525 50%, #b32222 50%)');$(".swal2-styled").css('border','none')});$("#keyboard-container").on('click','.btn-keyboard:not(.clicked)',function(){var letter=$(this).text();$(this).addClass('clicked');$(this).css('visibility','hidden');$("#answer-input").val($("#answer-input").val()+letter)});$(".answer-button").on('click',function(){var givenAnswer=$(".answer-input").val();if(givenAnswer.toUpperCase()==currentAnswer.toUpperCase()){$("body").removeClass('modal-open');localStorage.setItem("level"+currentLevel+"_stage"+currentStage,1);$('.answer-input').val(currentAnswer);$(".stage[data-nr="+currentStage+"]").find(".order-item").append('<img src="img/overlay.png" style="position:absolute;border-radius:10px; top:0; left:0">');sweetAlert('Nice one!','','success');console.log(this);$(".swal2-success-circular-line-left").css('background-color','transparent');$(".swal2-success-circular-line-right").css('background-color','transparent');$(".swal2-popup").css('background-color','black');$(".swal2-success-fix").css('background-color','transparent');$("#swal2-title").css('color','white');$("#myModal").hide(1000);$(".swal2-styled").css('background-color','transparent !important');$(".swal2-styled").css('background-image','linear-gradient(#c92525 50%, #b32222 50%)')}else{function highlight(obj){var orig=obj.style.backgroundColor;obj.style.backgroundColor='#3c3c3c';setTimeout(function(){obj.style.backgroundColor=orig},1000)}
highlight(input)}})});var modal=document.getElementById('myModal');var btn=document.getElementById("stage-icon");var span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"}
window.onclick=function(event){if(event.target==modal){modal.style.display="none";$("body").removeClass('modal-open')}}
String.prototype.levenstein=function(string){var a=this,b=string+"",m=[],i,j,min=Math.min;if(!(a&&b))return(b||a).length;for(i=0;i<=b.length;m[i]=[i++]);for(j=0;j<=a.length;m[0][j]=j++);for(i=1;i<=b.length;i++){for(j=1;j<=a.length;j++){m[i][j]=b.charAt(i-1)==a.charAt(j-1)?m[i-1][j-1]:m[i][j]=min(m[i-1][j-1]+1,min(m[i][j-1]+1,m[i-1][j]))}}
return m[b.length][a.length]}
function shuffle(a){var j,x,i;for(i=a.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));x=a[i];a[i]=a[j];a[j]=x}
return a}
document.addEventListener("DOMContentLoaded",function(event){var acc=document.getElementsByClassName("accordion");var panel=document.getElementsByClassName('panel');for(var i=0;i<acc.length;i++){acc[i].onclick=function(){var setClasses=!this.classList.contains('active-acc');setClass(acc,'active-acc','remove');setClass(panel,'show','remove');$("div.panel").css('background-color','transparent');$("div.panel").css('color','white');if(setClasses){this.classList.toggle("active-acc");this.nextElementSibling.classList.toggle("show")}}}
function setClass(els,className,fnName){for(var i=0;i<els.length;i++){els[i].classList[fnName](className)}}});setTimeout(function(){var focusedElement=jQuery(':focus');$('#answer-input').appendTo($('form'));$('#answer-input').appendTo($('form'));if(focusedElement&&focusedElement.length){focusedElement.focus()}},3000);$('#answer-input').prop('readonly',!0)