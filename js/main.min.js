function shuffle(e){var n,t,a;for(a=e.length-1;a>0;a--)n=Math.floor(Math.random()*(a+1)),t=e[a],e[a]=e[n],e[n]=t;return e}$(document).ready(function(){function e(e){$("body").addClass("modal-open");var n=document.getElementById("keyboard-button-template").innerHTML,t=Handlebars.compile(n),a=levelData["level"+currentLevel][e].extraLetters.split(""),s=levelData["level"+currentLevel][e].answer.split(""),o=a.concat(s).map(function(e){return e.toUpperCase()});$("#btn-space").css("width","100%"),shuffle(o);var c=t(o);$("#keyboard-container").html(c),$("#btn-clear").on("click",function(){$("#keyboard-container .btn-keyboard").css("visibility","visible"),$("#keyboard-container .btn-keyboard").removeClass("clicked"),$("#answer-input").val("")}),$("#btn-remove").on("click",function(){for(var e=$("#answer-input").val(),n=e.substr(e.length-1),t=0;t<$("button:contains('"+n+"')").length;t++)if("hidden"==$("button:contains('"+n+"')")[t].style.visibility){$($("button:contains('"+n+"')")[t]).removeClass("clicked"),$("button:contains('"+n+"')")[t].style.visibility="visible";break}e=e.slice(0,-1),$("#answer-input").val(e),$("#btn-remove").css("background-image","none"),$("#btn-remove").css("background-color","none")}),$("#btn-space").on("click",function(){var e=" ";$("#answer-input").val($("#answer-input").val()+e)}),$(".btn-keyboard:contains(' ')").attr("style","display: none");var r=levelData["level"+currentLevel][e];window.currentStage=e,currentAnswer=r.answer,$(".modal-img").attr("src","img/"+r.image),modal.style.display="block";var l=localStorage.getItem("level"+currentLevel+"_stage"+currentStage);if(l){$("#answer-input").val(currentAnswer.toUpperCase()),$("#answer-input").css("width","100%"),$("#answer-input").css("border","2px solid #46A413"),$(".fa-check-circle").css("display","block");for(var i=document.querySelectorAll(".btn-keyboard"),u=0;u<i.length;u++)i[u].style.display="none";$("#button-check").hide(),$("#btn-remove").hide(),$("#btn-clear").hide(),$("#btn-space").hide()}else $(".fa-check-circle").css("display","none"),$("#answer-input").val(""),$("#answer-input").css("border","none"),$("#button-check").show(),$("#answer-input").css("width","65%")}$(".fa-bars").click(function(){$(".main-nav-phone").toggle("slide"),$(".support-nav").hide(500),$(".container").show(500)}),$(".fa-cog").click(function(){$(".fa-cog").toggleClass("clicked"),$(".support-nav").toggle("slide"),$(".fa-cog").is("clicked")&&$(".main-nav-phone").hide(500)}),$(".stage").on("click",function(){var n=$(this).attr("data-nr");e(n)}),$("#button-check").on("click",function(){$("#button-check").toggleClass("bounceIn")});var n=document.getElementById("answer-input");window.addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&document.getElementById("button-check").click()}),$("#btn-bomb").on("click",function(){sweetAlert("Nice one!","","success"),$(".swal2-success-circular-line-left").css("background-color","transparent"),$(".swal2-success-circular-line-right").css("background-color","transparent"),$(".swal2-popup").css("background-color","black"),$(".swal2-success-fix").css("background-color","transparent"),$("#swal2-title").css("color","white"),$("#myModal").hide(1e3),$(".swal2-styled").css("background-image","linear-gradient(#c92525 50%, #b32222 50%)"),$(".swal2-styled").css("border","none")}),$("#keyboard-container").on("click",".btn-keyboard:not(.clicked)",function(){var e=$(this).text();$(this).addClass("clicked"),$(this).css("visibility","hidden"),$("#answer-input").val($("#answer-input").val()+e)}),$(".answer-button").on("click",function(){function e(e){var n=e.style.backgroundColor;e.style.backgroundColor="#3c3c3c",setTimeout(function(){e.style.backgroundColor=n},1e3)}var t=$(".answer-input").val();t.toUpperCase()==currentAnswer.toUpperCase()?($("body").removeClass("modal-open"),localStorage.setItem("level"+currentLevel+"_stage"+currentStage,1),$(".answer-input").val(currentAnswer),$(".stage[data-nr="+currentStage+"]").find(".order-item").append('<img src="img/overlay.png" style="position:absolute;border-radius:10px; top:0; left:0">'),sweetAlert("Nice one!","","success"),console.log(this),$(".swal2-success-circular-line-left").css("background-color","transparent"),$(".swal2-success-circular-line-right").css("background-color","transparent"),$(".swal2-popup").css("background-color","black"),$(".swal2-success-fix").css("background-color","transparent"),$("#swal2-title").css("color","white"),$("#myModal").hide(1e3),$(".swal2-styled").css("background-color","transparent !important"),$(".swal2-styled").css("background-image","linear-gradient(#c92525 50%, #b32222 50%)")):e(n)})});var modal=document.getElementById("myModal"),btn=document.getElementById("stage-icon"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"},window.onclick=function(e){e.target==modal&&(modal.style.display="none",$("body").removeClass("modal-open"))},String.prototype.levenstein=function(e){var n,t,a=this,s=e+"",o=[],c=Math.min;if(!a||!s)return(s||a).length;for(n=0;n<=s.length;o[n]=[n++]);for(t=0;t<=a.length;o[0][t]=t++);for(n=1;n<=s.length;n++)for(t=1;t<=a.length;t++)o[n][t]=s.charAt(n-1)==a.charAt(t-1)?o[n-1][t-1]:o[n][t]=c(o[n-1][t-1]+1,c(o[n][t-1]+1,o[n-1][t]));return o[s.length][a.length]},document.addEventListener("DOMContentLoaded",function(e){function n(e,n,t){for(var a=0;a<e.length;a++)e[a].classList[t](n)}for(var t=document.getElementsByClassName("accordion"),a=document.getElementsByClassName("panel"),s=0;s<t.length;s++)t[s].onclick=function(){var e=!this.classList.contains("active-acc");n(t,"active-acc","remove"),n(a,"show","remove"),$("div.panel").css("background-color","transparent"),$("div.panel").css("color","white"),e&&(this.classList.toggle("active-acc"),this.nextElementSibling.classList.toggle("show"))}}),setTimeout(function(){var e=jQuery(":focus");$("#answer-input").appendTo($("form")),$("#answer-input").appendTo($("form")),e&&e.length&&e.focus()},3e3),$("#answer-input").prop("readonly",!0);